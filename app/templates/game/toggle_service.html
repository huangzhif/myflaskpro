{% extends "base.html" %}

{% block heading %}
    {{ title }}
{% endblock %}

{% block content %}
    <div class="row">
    <div class="col-md-9">
        <form action="" method="post" class="form form-horizontal">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="form-group">
                <label class="control-label col-lg-2" for="game"><span style="color: red">* </span>游戏</label>
                <div class="col-lg-10">
                    <select class="form-control selectpicker" id="id_game" name="game" onchange="selectGame('toggleservice')">
                        <option value=""></option>
                        {% for game in games %}
                            <option value={{ game.id }}>{{ game.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-lg-2" for="channel"><span style="color: red">* </span>渠道</label>
                <div class="col-lg-10">
                    <select class="form-control selectpicker" id="id_channel" name="channel" onchange="selectChannel()"></select>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-lg-2" for="zone"><span style="color: red">* </span>区服</label>
                <div class="col-lg-10">
                    <select class="form-control selectpicker" multiple data-actions-box="true" data-live-search="true" id="id_zone" name="zone"></select>
                </div>
            </div>
            <div class="form-group">
                <div class="col-lg-offset-2 col-lg-10">
                    <a href="#" onclick="Execute()" class="btn btn-sm btn-info" id="submit" name="submit" type="submit">Execute</a>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-lg-2" for="publishlog">执行信息</label>
                <div class="col-lg-offset-2 col-lg-10">
                <textarea id="publishlog" name="publishlog" rows="20" wrap="hard" readonly="readonly">

                </textarea>
                </div>
            </div>
        </form>
    </div>
    <div class="col-md-3"><div hidden="hidden" id="id_doc"></div></div>
    </div>
{% endblock %}

{% block custom_foot_js %}
    <script type="application/javascript">
    var converter = new showdown.Converter();
    var csrftoken = $('meta[name=csrf-token]').attr('content');

    function Execute() {
        if (!$("#id_game").val() || !$("#id_channel").val() || !$("#id_zone").val()) {
            swal({
                title: "必填项不能为空！",
                allowOutsideClick: true,
                text: "2秒后自动关闭.",
                timer: 2000,
                {#              buttons: false#}
            });
            return false;
        }


        return false;
    }
    </script>

{% endblock %}